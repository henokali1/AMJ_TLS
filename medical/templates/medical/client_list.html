{% extends 'base.html' %}

{% block title %}Clients - AMJ-TLS{% endblock %}

{% block content %}
<header style="margin-bottom: 2rem;">
    <h1 style="font-size: 1.8rem; font-weight: 700;">Client Directory</h1>
    <p style="color: var(--text-light);">Manage medical records and client information.</p>
</header>

<form method="GET" action="{% url 'client_list' %}" class="search-container">
    <input type="text" name="q" value="{{ request.GET.q }}" class="search-input" placeholder="Search by name or passport number...">
    <button type="submit" class="btn btn-primary" style="padding: 0.75rem 1.25rem;">
        <i class="fas fa-search"></i>
    </button>
</form>

{% if clients %}
    <div style="display: grid; gap: 1rem;">
        {% for client in clients %}
            <div class="card" style="display: flex; align-items: center; gap: 1.5rem; transition: transform 0.2s; cursor: pointer; padding: 1rem;" onclick="location.href='{% url 'client_update' client.pk %}';">
                <div style="width: 70px; height: 70px; border-radius: 12px; overflow: hidden; background: #eee; flex-shrink: 0;">
                    {% if client.photo %}
                        <img src="{{ client.photo.url }}" alt="{{ client.client_name }}" style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #ccc;">
                            <i class="fas fa-user fa-2x"></i>
                        </div>
                    {% endif %}
                </div>
                <div style="flex: 1;">
                    <h3 style="font-size: 1.1rem; margin-bottom: 0.25rem;">{{ client.client_name }}</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; font-size: 0.85rem; color: var(--text-light);">
                        <span><i class="fas fa-id-card" style="margin-right: 4px;"></i> {{ client.passport_no }}</span>
                        <span><i class="fas fa-birthday-cake" style="margin-right: 4px;"></i> {{ client.age }} Years</span>
                        <span><i class="fas fa-calendar-alt" style="margin-right: 4px;"></i> {{ client.date|date:"M d, Y" }}</span>
                    </div>
                </div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <a href="{% url 'view_certificate' client.pk %}" class="btn btn-outline" style="padding: 0.5rem 0.75rem; font-size: 0.8rem; border-color: var(--accent); color: var(--accent);" onclick="event.stopPropagation();">
                        <i class="fas fa-file-medical"></i> Cert
                    </a>
                    <div style="color: var(--primary);">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card" style="text-align: center; padding: 4rem 2rem;">
        <i class="fas fa-search fa-3x" style="color: #E2E8F0; margin-bottom: 1rem;"></i>
        <h3 style="color: var(--text-light);">No clients found</h3>
        <p style="color: #94A3B8; font-size: 0.9rem;">Try adjusting your search or add a new client.</p>
    </div>
{% endif %}
{% endblock %}
